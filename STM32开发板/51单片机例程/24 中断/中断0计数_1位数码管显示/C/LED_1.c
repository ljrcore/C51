/*******************************************************************************
*  标题:                  试验1位数码管上显示外部中断计数                      *
*																			   *
*  连接方法：参照接线图
********************************************************************************
*                         	       										       *
* 请学员认真消化本例程，用单片机脚直接控制数码管和外部中断使用                 *
********************************************************************************/

#include < reg51.h >
#include <intrins.h>


unsigned int LedNumVal;

// 此表为 LED 的字模            // 0    1    2    3    4    5    6   7    8    9    A    b    c    d    E    -    L   P    U    Hidden  _ (20)
unsigned char code Disp_Tab[] = { 0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90,0x88,0x83,0xC6,0xA1,0x86,0xbf,0xc7,0x8c,0xc1, 0xff,  0xf7 }; 


/********************************************************
* 主程序                                               *
********************************************************/
void main(void)
{  
   
// IT0=0;       //低电平触发
   IT0=1;       //下降沿触发
   EA=1;
   EX0=1;

   while(1)
   {    
      P0=Disp_Tab[LedNumVal%10];
   }
}
/********************************************************
* INT0中断函数                                          *
********************************************************/
void  counter(void) interrupt 0 
{
   EX0=0;
   LedNumVal++;     //中断计数  
   EX0=1;
}
/********************************************************/
