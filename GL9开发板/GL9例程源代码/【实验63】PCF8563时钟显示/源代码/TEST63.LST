C51 COMPILER V7.00  TEST63                                                                 05/26/2014 10:23:34 PAGE 1   


C51 COMPILER V7.00, COMPILATION OF MODULE TEST63
OBJECT MODULE PLACED IN TEST63.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE TEST63.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          ////////////////////////////////////////////////////////////////////////////
   2          //                ¸øÁ¦Õßµ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³£¬¿ª·¢Ñ§Ï°¶¼¸øÁ¦£¡              //
   3          ////////////////////////////////////////////////////////////////////////////
   4          //                     Ñ§Ï°51µ¥Æ¬»ú£¬ÆäÊµ¿ÉÒÔºÜ¼òµ¥                       //
   5          ////////////////////////////////////////////////////////////////////////////
   6          //                Äþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾  www.MovingChip.com                //
   7          ////////////////////////////////////////////////////////////////////////////
   8          
   9          #include <AT89X52.h>       //µ÷ÓÃ51µ¥Æ¬»úµÄÍ·ÎÄ¼þ
  10          #include <Intrins.h>       //Òò±¾ÀýÐèÒªÊ¹ÓÃ¿Õ²Ù×÷£¬±ØÐëµ÷ÓÃÕâ¸öÍ·ÎÄ¼þ
  11          
  12          //---------------------------------------
  13          //1602Òº¾§Ïà¹ØI/OÉèÖÃ
  14          sbit E=P2^3;               //1602Òº¾§µÄE½Å½ÓÔÚP2.3¿ÚÉÏ
  15          sbit RW=P2^4;              //1602Òº¾§µÄRW½Å½ÓÔÚP2.4¿ÚÉÏ
  16          sbit RS=P2^5;              //1602Òº¾§µÄRS½Å½ÓÔÚP2.5¿ÚÉÏ
  17          //---------------------------------------
  18          
  19          //---------------------------------------
  20          //Èí¼þÄ£ÄâIICÏà¹ØI/OÉèÖÃ
  21          sbit SCL=P1^1;             //PCF8563TµÄ SCL Òý½Å½ÓÓÚµ¥Æ¬»úµÄP1^1Òý½ÅÉÏ
  22          sbit SDA=P1^0;             //PCF8563TµÄ SDA Òý½Å½ÓÓÚµ¥Æ¬»úµÄP1^0Òý½ÅÉÏ
  23          //---------------------------------------
  24          
  25          
  26          unsigned char j;      
  27          //---------------------------------------
  28          
  29          //---------------------------------------
  30          //1602Òº¾§¼Ä´æÆ÷ÉèÖÃ
  31          unsigned char DISbuf;     //ÉèÖÃ8Î»µÄunsigend charÐÍ¼Ä´æÆ÷ÓÃÀ´ÔÝ´æ1602ÒªÏÔÊ¾µÄÄÚÈÝ
  32          //---------------------------------------
  33          
  34          //---------------------------------------
  35          //Ãû³Æ£ºÉúIICÆô¶¯ÐÅºÅº¯Êý
  36          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
  37          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
  38          //ÍøÖ·£ºwww.MovingChip.com
  39          //ÈÕÆÚ£º20140215
  40          //---------------------------------------
  41          void IICstart(void)
  42          { 
  43   1           SDA=1;                //ÏÈ½«SDA=1£¬ÒÔ×¼±¸ÔÚSCL=1Ê±£¬½«SDA=0
  44   1           SCL=1;                //Ê±ÖÓ×ÜÏßÀ­¸ß 
  45   1           _nop_();                   //ÂÔ×öÑÓÊ±
  46   1           _nop_();                   //ÂÔ×öÑÓÊ±
  47   1           SDA=0;                //SCL=1Ê±£¬½«SDAÀ­µÍ¼´²úÉúÆô¶¯ÐÅºÅ 
  48   1           _nop_();                   //ÂÔ×öÑÓÊ±
  49   1           _nop_();                   //ÂÔ×öÑÓÊ±
  50   1           SCL=0;                //½«SCL=0£¬Íê³ÉÆô¶¯ÐÅºÅ²Ù×÷      
  51   1      } 
  52          
  53          //---------------------------------------
  54          //Ãû³Æ£ºIICÍ£Ö¹ÐÅºÅº¯Êý
  55          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
C51 COMPILER V7.00  TEST63                                                                 05/26/2014 10:23:34 PAGE 2   

  56          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
  57          //ÍøÖ·£ºwww.MovingChip.com
  58          //ÈÕÆÚ£º20140215
  59          //---------------------------------------
  60          void IICstop(void)
  61          { 
  62   1           SDA=0;                //ÏÈ½«SDA=0£¬ÒÔ×¼±¸ÔÚSCL=1Ê±£¬½«SDA=1
  63   1           SCL=1;                //Ê±ÖÓ×ÜÏßÀ­¸ß 
  64   1           _nop_();                   //ÂÔ×öÑÓÊ±
  65   1           _nop_();                   //ÂÔ×öÑÓÊ± 
  66   1           SDA=1;                //SCL=1Ê±£¬½«SDAÀ­¸ß¼´²úÉúÍ£Ö¹ÐÅºÅ 
  67   1           _nop_();                   //ÂÔ×öÑÓÊ±
  68   1           _nop_();                   //ÂÔ×öÑÓÊ±
  69   1           SCL=0;                //½«SCL=0£¬Íê³ÉÆô¶¯ÐÅºÅ²Ù×÷      
  70   1      } 
  71          
  72          //---------------------------------------
  73          //Ãû³Æ£ºÏòIIC×ÜÏßÐ´Èë1¸ö×Ö½Úº¯Êý
  74          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
  75          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
  76          //ÍøÖ·£ºwww.MovingChip.com
  77          //ÈÕÆÚ£º20140215
  78          //---------------------------------------
  79          void Write1Byte(unsigned char Buf1)
  80          { 
  81   1           unsigned char k;      //1¸ö×Ö½ÚÒª·Ö8´ÎÐ´Èë£¬ÐèÒª¶¨ÒåÒ»¸ö¼Ä´æÆ÷ÓÃÀ´¼ÆÊý
  82   1           for(k=0;k<8;k++)      //×öÒ»¸ö8´ÎµÄÑ­»·£¬Ã¿´ÎÐ´Èë1Î»£¬ÐèÒªÐ´8´Î
  83   1           {
  84   2               if(Buf1&0x80)     //´Ó×î¸ßÎ»¿ªÊ¼Ð´ 
  85   2               {
  86   3                   SDA=1;        //Èç¹ûÓûÐ´ÈëÊý¾ÝÎª1£¬¾Í½«Êý¾ÝÏßÖÃ1
  87   3               }
  88   2               else
  89   2               {
  90   3                   SDA=0;        //Èç¹ûÓûÐ´ÈëÊý¾ÝÎª0£¬¾Í½«Êý¾ÝÏßÐ´0 
  91   3               }
  92   2               _nop_();          //ÂÔ×öÑÓÊ±
  93   2               _nop_();          //ÂÔ×öÑÓÊ±
  94   2               SCL=1;            //Ê±ÖÓÏß×öÒ»¸öÉÏÉýÑØ£¬½«Ò»Î»Êý¾ÝÐ´Èë
  95   2               Buf1=Buf1<<1;     //Êý¾Ý×óÒÆÒ»Î»£¬½«ÏÂ´ÎÒªÐ´ÈëµÄÎ»Êý¾ÝÒÆµ½×î¸ßÎ»
  96   2               _nop_();          //ÂÔ×öÑÓÊ±
  97   2               SCL=0;            //½«SCL=0£¬ÒÔ×¼±¸Í¨¹ýÉÏÉýÑØ½«Êý¾ÝÐ´Èë
  98   2               _nop_();          //ÂÔ×öÑÓÊ±
  99   2           }
 100   1           SDA=1;                //½«SDA=1£¬×¼±¸¶ÁÓ¦´ðÐÅºÅ
 101   1           _nop_();              //ÂÔ×öÑÓÊ±
 102   1           SCL=1;                //½«SCL=1£¬×ö¸öÉÏÉýÑØ×¼±¸¶ÁÓ¦´ðÐÅºÅ
 103   1           _nop_();              //ÂÔ×öÑÓÊ±
 104   1           _nop_();              //ÂÔ×öÑÓÊ±
 105   1           SCL=0;                //½«SCL=0£¬½áÊøÓ¦´ðÐÅºÅ¶Á²Ù×÷
 106   1      } 
 107          
 108          //---------------------------------------
 109          //Ãû³Æ£º´ÓIIC×ÜÏß¶ÁÈë1¸ö×Ö½Úº¯Êý
 110          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 111          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 112          //ÍøÖ·£ºwww.MovingChip.com
 113          //ÈÕÆÚ£º20140215
 114          //---------------------------------------
 115          unsigned char Read1Byte(void)
 116          { 
 117   1           unsigned char k;      //1¸ö×Ö½ÚÒª·Ö8´Î¶Á³ö£¬ÐèÒª¶¨ÒåÒ»¸ö¼Ä´æÆ÷ÓÃÀ´¼ÆÊý
C51 COMPILER V7.00  TEST63                                                                 05/26/2014 10:23:34 PAGE 3   

 118   1           unsigned char t=0;    //¶¨ÒåÒ»¸ö¼Ä´æÆ÷ÓÃ±£´æ¶Á³öÊý¾Ý
 119   1           for(k=0;k<8;k++)      //×öÒ»¸ö8´ÎµÄÑ­»·£¬Ã¿´Î¶ÁÈë1Î»£¬ÐèÒª¶Á8´Î
 120   1           {
 121   2               t=t<<1;           //Êý¾Ý×óÒÆÒ»Î»£¬¿Õ³ö×îµÍÎ»ÒÔ×¼±¸±£´æ¶ÁÈëµÄÒ»Î»Êý¾Ý
 122   2               SDA=1;            //½«SDAÐ´1×¼±¸¶Á
 123   2               SCL=1;            //½«SCL=1£¬×ö¸öÉÏÉýÑØ×¼±¸¶ÁÒ»Î»Êý¾Ý
 124   2               _nop_();          //ÂÔ×öÑÓÊ±
 125   2               _nop_();          //ÂÔ×öÑÓÊ±
 126   2               if(SDA==1)        //¶ÁÒ»Î»Êý¾Ý£¬²¢ÅÐ¶Ï 
 127   2               {
 128   3                   t=t|0x01;     //Èç¹û¶ÁÈëÊý¾ÝÎª1£¬¾Í½«½ÓÊÕ»º³åÇø×îµÍÒ»Î»ÖÃ1
 129   3               }
 130   2               else
 131   2               {
 132   3                   t=t&0xfe;     //Èç¹û¶ÁÈëÊý¾ÝÎª0£¬¾Í½«½ÓÊÕ»º³åÇø×îµÍÒ»Î»Ð´0
 133   3               }
 134   2               SCL=0;            //SCL»Ö¸´Îª0£¬½áÊøÒ»Î»Êý¾Ý¶Á²Ù×÷
 135   2               _nop_();          //ÂÔ×öÑÓÊ±
 136   2               _nop_();          //ÂÔ×öÑÓÊ±
 137   2           }
 138   1           return t;             //½«¶ÁÈëµÄÒ»¸ö×Ö½Ú·µ»Ø
 139   1      } 
 140          
 141          //---------------------------------------
 142          //Ãû³Æ£ºÈí¼þÄ£ÄâIICÏòPCF8563Ö¸¶¨µØÖ·Ð´Ò»¸ö×Ö½Úº¯Êý
 143          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 144          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 145          //ÍøÖ·£ºwww.MovingChip.com
 146          //ÈÕÆÚ£º20140215
 147          //---------------------------------------
 148          void WritePCF8563(unsigned char Address,unsigned char Databuf)
 149          {                          //Ö±½Óµ÷ÓÃ±¾º¯Êý¼´¿É¶ÔPCF8563µÄAddressµØÖ·Ð´Databuf
 150   1          IICstart();            //IICÆô¶¯ÐÅºÅ
 151   1      
 152   1          Write1Byte(0xA2);      //·¢ËÍPCF8563µÄÆ÷¼þµØÖ·ºÍÐ´ÐÅºÅ
 153   1      
 154   1          Write1Byte(Address);   //·¢ËÍµØÖ·
 155   1      
 156   1          Write1Byte(Databuf);   //·¢ËÍÊý¾Ý
 157   1      
 158   1          IICstop();             //²úÉúIICÍ£Ö¹ÐÅºÅ
 159   1      }
 160          
 161          //---------------------------------------
 162          //Ãû³Æ£ºÈí¼þÄ£ÄâIIC´ÓPCF8563Ö¸¶¨µØÖ·¶ÁÒ»¸ö×Ö½Úº¯Êý
 163          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 164          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 165          //ÍøÖ·£ºwww.MovingChip.com
 166          //ÈÕÆÚ£º20140215
 167          //---------------------------------------
 168          unsigned ReadPCF8563(unsigned char Address)
 169          {                          //Ö±½Óµ÷ÓÃ±¾º¯Êý¼´¿É´ÓPCF8563µÄAddressµØÖ·¶Á³öÊý¾Ý·µ»Ø
 170   1          unsigned char buf;     //¶¨ÒåÒ»¸ö¼Ä´æÆ÷ÓÃÀ´ÔÝ´æ¶Á³öµÄÊý¾Ý
 171   1          IICstart();            //IICÆô¶¯ÐÅºÅ
 172   1      
 173   1          Write1Byte(0xA2);      //·¢ËÍPCF8563µÄÆ÷¼þµØÖ·ºÍÐ´ÐÅºÅ
 174   1      
 175   1          Write1Byte(Address);   //·¢ËÍµØÖ·
 176   1      
 177   1          IICstart();            //IICÆô¶¯ÐÅºÅ
 178   1      
 179   1          Write1Byte(0xA3);      //·¢ËÍPCF8563µÄÆ÷¼þµØÖ·ºÍ¶ÁÐÅºÅ
C51 COMPILER V7.00  TEST63                                                                 05/26/2014 10:23:34 PAGE 4   

 180   1      
 181   1          buf=Read1Byte();//¶ÁÒ»¸ö×Ö½ÚÊý¾Ý
 182   1      
 183   1          IICstop();             //²úÉúIICÍ£Ö¹ÐÅºÅ
 184   1      
 185   1          return(buf);           //½«¶Á³öÊý¾Ý·µ»Ø
 186   1      }
 187          
 188          //---------------------------------------
 189          //Ãû³Æ£º1602Òº¾§ÓÃÑÓÊ±º¯Êý
 190          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 191          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 192          //ÍøÖ·£ºwww.MovingChip.com
 193          //ÈÕÆÚ£º20140215
 194          //---------------------------------------
 195          void Delay1602(unsigned int t)
 196          { 
 197   1           unsigned int k;      //¶¨ÒåÒ»¸ö16Î»¼Ä´æÆ÷ÓÃÀ´×öÑÓÊ±ÓÃ 
 198   1           for(k=0;k<t;k++);    //ÑÓÊ± 
 199   1      } 
 200          
 201          //---------------------------------------
 202          //Ãû³Æ£º1602Òº¾§Ã¦¼ì²âº¯Êý
 203          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 204          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 205          //ÍøÖ·£ºwww.MovingChip.com
 206          //ÈÕÆÚ£º20140215
 207          //---------------------------------------
 208          void LCD1602_busy(void)
 209          { 
 210   1           P0_7=1;              //½«P0.7ÖÃ1£¬Îª¶Á×´Ì¬×ö×¼±¸ 
 211   1           RS=0;                //RS=0¡¢RW=1¡¢E=1Ê±£¬Ã¦ÐÅºÅÊä³öµ½DB7£¬ÓÉP0.7¶ÁÈë
 212   1           RW=1;                //RS=0¡¢RW=1¡¢E=1Ê±£¬Ã¦ÐÅºÅÊä³öµ½DB7£¬ÓÉP0.7¶ÁÈë
 213   1           E=1;                 //RS=0¡¢RW=1¡¢E=1Ê±£¬Ã¦ÐÅºÅÊä³öµ½DB7£¬ÓÉP0.7¶ÁÈë
 214   1           while(P0_7==1);      //ÓÉP0.7¶ÁÈë1£¬±íÊ¾1602Òº¾§Ã¦£¬ÐèÒªµÈ´ý
 215   1           E=0;                 //¶ÁÍêÒÔºó£¬»Ö¸´EµÄµçÆ½
 216   1      } 
 217          
 218          //---------------------------------------
 219          //Ãû³Æ£º1600Ð´ÃüÁîº¯Êý
 220          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 221          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 222          //ÍøÖ·£ºwww.MovingChip.com
 223          //ÈÕÆÚ£º20140215
 224          //---------------------------------------
 225          void LCD1602_Write_com(unsigned char combuf)
 226          { 
 227   1           RS=0;                //Ñ¡ÔñÖ¸Áî¼Ä´æÆ÷
 228   1           RW=0;                //Ñ¡ÔñÐ´×´Ì¬
 229   1           P0=combuf;           //½«ÃüÁî×ÖÍ¨¹ýP0¿ÚËÍÖÁDB
 230   1           E=1;                 //E¸ßµçÆ½½«ÃüÁî×ÖÐ´Èë1602Òº¾§
 231   1           E=0;                 //Ð´ÍêÒÔºó£¬»Ö¸´EµÄµçÆ½
 232   1      } 
 233          
 234          //---------------------------------------
 235          //Ãû³Æ£º1602Ð´ÃüÁîº¯Êý(´øÃ¦¼ì²â)
 236          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 237          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 238          //ÍøÖ·£ºwww.MovingChip.com
 239          //ÈÕÆÚ£º20140215
 240          //---------------------------------------
 241          void LCD1602_Write_com_busy(unsigned char combuf)
C51 COMPILER V7.00  TEST63                                                                 05/26/2014 10:23:34 PAGE 5   

 242          { 
 243   1           LCD1602_busy();            //µ÷ÓÃÃ¦¼ì²âº¯Êý
 244   1           LCD1602_Write_com(combuf); //µ÷ÓÃÃ¦¼ì²âº¯Êý
 245   1      } 
 246          
 247          //---------------------------------------
 248          //Ãû³Æ£º1602Ð´Êý¾Ýº¯Êý(´øÃ¦¼ì²â)
 249          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 250          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 251          //ÍøÖ·£ºwww.MovingChip.com
 252          //ÈÕÆÚ£º20140215
 253          //---------------------------------------
 254          void LCD1602_Write_data_busy(unsigned char databuf)
 255          { 
 256   1           LCD1602_busy();      //µ÷ÓÃÃ¦¼ì²âº¯Êý
 257   1           RS=1;                //Ñ¡ÔñÊý¾Ý¼Ä´æÆ÷
 258   1           RW=0;                //Ñ¡ÔñÐ´×´Ì¬
 259   1           P0=databuf;          //½«ÃüÁî×ÖÍ¨¹ýP0¿ÚËÍÖÁDB
 260   1           E=1;                 //E¸ßµçÆ½½«ÃüÁî×ÖÐ´Èë1602Òº¾§
 261   1           E=0;                 //Ð´ÍêÒÔºó£¬»Ö¸´EµÄµçÆ½
 262   1      } 
 263          
 264          //---------------------------------------
 265          //Ãû³Æ£º1602Òº¾§ÏÔÊ¾µØÖ·Ð´º¯Êý
 266          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 267          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 268          //ÍøÖ·£ºwww.MovingChip.com
 269          //ÈÕÆÚ£º20140215
 270          //---------------------------------------
 271          void LCD1602_Write_address(unsigned char x,unsigned char y)
 272          { 
 273   1           x&=0x0f;             //ÁÐµØÖ·ÏÞÖÆÔÚ0-15¼ä
 274   1           y&=0x01;             //ÐÐµØÖ·ÏÞÖÆÔÚ0-1¼ä
 275   1           if(y==0)             //Èç¹ûÊÇµÚÒ»ÐÐ
 276   1               LCD1602_Write_com_busy(x|0x80);        //½«ÁÐµØÖ·Ð´Èë
 277   1           else                 //Èç¹ûÊÇµÚ¶þÐÐ
 278   1               LCD1602_Write_com_busy((x+0x40)|0x80); //½«ÁÐµØÖ·Ð´Èë
 279   1      } 
 280          
 281          //---------------------------------------
 282          //Ãû³Æ£º1602Òº¾§³õÊ¼»¯º¯Êý
 283          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 284          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 285          //ÍøÖ·£ºwww.MovingChip.com
 286          //ÈÕÆÚ£º20140215
 287          //---------------------------------------
 288          void LCD1602_init(void)
 289          { 
 290   1           Delay1602(1500);               //µ÷ÓÃÑÓÊ±º¯Êý
 291   1           LCD1602_Write_com(0x38);       //8Î»Êý¾Ý×ÜÏß£¬Á½ÐÐÏÔÊ¾Ä£Ê½£¬5*7µãÕóÏÔÊ¾
 292   1           Delay1602(500);                //µ÷ÓÃÑÓÊ±º¯Êý
 293   1           LCD1602_Write_com(0x38);       //8Î»Êý¾Ý×ÜÏß£¬Á½ÐÐÏÔÊ¾Ä£Ê½£¬5*7µãÕóÏÔÊ¾
 294   1           Delay1602(500);                //µ÷ÓÃÑÓÊ±º¯Êý
 295   1           LCD1602_Write_com(0x38);       //8Î»Êý¾Ý×ÜÏß£¬Á½ÐÐÏÔÊ¾Ä£Ê½£¬5*7µãÕóÏÔÊ¾
 296   1           LCD1602_Write_com_busy(0x38);  //8Î»Êý¾Ý×ÜÏß£¬Á½ÐÐÏÔÊ¾Ä£Ê½£¬5*7µãÕóÏÔÊ¾
 297   1           LCD1602_Write_com_busy(0x08);  //ÏÔÊ¾¹¦ÄÜ¹Ø£¬ÎÞ¹â±ê
 298   1           LCD1602_Write_com_busy(0x01);  //ÇåÆÁ
 299   1           LCD1602_Write_com_busy(0x06);  //Ð´ÈëÐÂµÄÊý¾Ýºó£¬¹â±êÓÒÒÆ£¬ÏÔÊ¾ÆÁ²»ÒÆ¶¯
 300   1           LCD1602_Write_com_busy(0x0C);  //ÏÔÊ¾¹¦ÄÜ¿ª£¬ÎÞ¹â±ê
 301   1      } 
 302          
 303          //---------------------------------------
C51 COMPILER V7.00  TEST63                                                                 05/26/2014 10:23:34 PAGE 6   

 304          //Ãû³Æ£º1602Òº¾§Ö¸¶¨µØÖ·ÏÔÊ¾º¯Êý
 305          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 306          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 307          //ÍøÖ·£ºwww.MovingChip.com
 308          //ÈÕÆÚ£º20140215
 309          //---------------------------------------
 310          void LCD1602_Disp(unsigned char x,unsigned char y,unsigned char buf)
 311          { 
 312   1           LCD1602_Write_address(x,y);    //ÏÈ½«µØÖ·ÐÅÏ¢Ð´Èë
 313   1           LCD1602_Write_data_busy(buf);  //ÔÙÐ´ÈëÒªÏÔÊ¾µÄÊý¾Ý
 314   1      } 
 315          
 316          //---------------------------------------
 317          //Ãû³Æ: Ö÷º¯Êý
 318          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 319          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 320          //ÍøÖ·£ºwww.MovingChip.com
 321          //ÈÕÆÚ£º20140215
 322          //---------------------------------------
 323          void main(void)            //Ö÷º¯Êý,µ¥Æ¬»ú¿ª»úºó¾ÍÊÇ´ÓÕâ¸öº¯Êý¿ªÊ¼ÔËÐÐ
 324          {
 325   1      
 326   1          LCD1602_init();        //µ÷ÓÃ1602Òº¾§³õÊ¼»¯º¯Êý
 327   1      
 328   1          //***³õÊ¼»¯Ê±ÖÓÐ¾Æ¬µÄ²ÎÊýÎª12Äê9ÔÂ3ÈÕ20µã03·Ö07Ãë***
 329   1          WritePCF8563(0x00,0x00); //Æô¶¯PCF8563
 330   1          WritePCF8563(0x02,0x07); //ÉèÖÃÃë³õÊ¼²ÎÊýÎª07
 331   1          WritePCF8563(0x03,0x03); //ÉèÖÃ·ÖÖÓ³õÊ¼²ÎÊýÎª03
 332   1          WritePCF8563(0x04,0x20); //ÉèÖÃÐ¡Ê±³õÊ¼²ÎÊýÎª20
 333   1          WritePCF8563(0x05,0x03); //ÉèÖÃÈÕ³õÊ¼²ÎÊýÎª03
 334   1          WritePCF8563(0x06,0x01); //ÉèÖÃÐÇÆÚ³õÊ¼²ÎÊýÎª01
 335   1          WritePCF8563(0x07,0x09); //ÉèÖÃÔÂ³õÊ¼²ÎÊýÎª09
 336   1          WritePCF8563(0x08,0x12); //ÉèÖÃÄê³õÊ¼²ÎÊýÎª12
 337   1          //***************************
 338   1          while(1)               //ËÀÑ­»·,µ¥Æ¬»ú³õÊ¼»¯ºó,½«Ò»Ö±ÔËÐÐÕâ¸öËÀÑ­»·
 339   1          {
 340   2              DISbuf=ReadPCF8563(0x08); //¶Á³öÄê²ÎÊý 
 341   2          
 342   2          //***1602Òº¾§ÏÔÊ¾0-0XFF***
 343   2              j=DISbuf>>4;                //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÒÆµ½µÍ4Î»ÉÏ
 344   2                      j&=0x01;
 345   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É        
 346   2              LCD1602_Disp(0,0,j);        //ÔÚµÚ1ÐÐµÄµÚ3ÁÐÏÔÊ¾¸ß4Î»µÄÊ®Áù½øÖÆÊý×Ö
 347   2              j=DISbuf&0x0F;              //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÆÁ±Îµô£¬±£ÁôµÍ4Î»
 348   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É        
 349   2              LCD1602_Disp(1,0,j);        //ÔÚµÚ1ÐÐµÄµÚ4ÁÐÏÔÊ¾µÍ4Î»µÄÊ®Áù½øÖÆÊý×Ö
 350   2          //***********************
 351   2                      LCD1602_Disp(2,0,'.');        //ÏÔÊ¾¡°¡£¡±
 352   2                      DISbuf=ReadPCF8563(0x07);       //¶Á³öÔÂ²ÎÊý
 353   2                      //***1602Òº¾§ÏÔÊ¾0-0XFF***
 354   2              j=DISbuf>>4;                //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÒÆµ½µÍ4Î»ÉÏ
 355   2                      j&=0x01;
 356   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É        
 357   2              LCD1602_Disp(3,0,j);        //ÔÚµÚ1ÐÐµÄµÚ3ÁÐÏÔÊ¾¸ß4Î»µÄÊ®Áù½øÖÆÊý×Ö
 358   2              j=DISbuf&0x0F;              //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÆÁ±Îµô£¬±£ÁôµÍ4Î»
 359   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É        
 360   2              LCD1602_Disp(4,0,j);        //ÔÚµÚ1ÐÐµÄµÚ4ÁÐÏÔÊ¾µÍ4Î»µÄÊ®Áù½øÖÆÊý×Ö
 361   2          //***********************
 362   2                      LCD1602_Disp(5,0,'.');        //ÏÔÊ¾¡°¡£¡
 363   2              DISbuf=ReadPCF8563(0x05);       //¶Á³öÈÕ²ÎÊý
 364   2                      //***1602Òº¾§ÏÔÊ¾0-0XFF***
 365   2              j=DISbuf>>4;                //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÒÆµ½µÍ4Î»ÉÏ
C51 COMPILER V7.00  TEST63                                                                 05/26/2014 10:23:34 PAGE 7   

 366   2                      j&=0x03;
 367   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É       
 368   2              LCD1602_Disp(6,0,j);        //ÔÚµÚ1ÐÐµÄµÚ3ÁÐÏÔÊ¾¸ß4Î»µÄÊ®Áù½øÖÆÊý×Ö
 369   2              j=DISbuf&0x0F;              //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÆÁ±Îµô£¬±£ÁôµÍ4Î»
 370   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É        
 371   2              LCD1602_Disp(7,0,j);        //ÔÚµÚ1ÐÐµÄµÚ4ÁÐÏÔÊ¾µÍ4Î»µÄÊ®Áù½øÖÆÊý×Ö
 372   2          //***********************
 373   2              DISbuf=ReadPCF8563(0x04);       //¶Á³öÐ¡Ê±²ÎÊý
 374   2              //***1602Òº¾§ÏÔÊ¾0-0XFF***
 375   2              j=DISbuf>>4;                //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÒÆµ½µÍ4Î»ÉÏ
 376   2                      j&=0x03;
 377   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É        
 378   2              LCD1602_Disp(0,1,j);        //ÔÚµÚ1ÐÐµÄµÚ3ÁÐÏÔÊ¾¸ß4Î»µÄÊ®Áù½øÖÆÊý×Ö
 379   2              j=DISbuf&0x0F;              //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÆÁ±Îµô£¬±£ÁôµÍ4Î»
 380   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É        
 381   2              LCD1602_Disp(1,1,j);        //ÔÚµÚ1ÐÐµÄµÚ4ÁÐÏÔÊ¾µÍ4Î»µÄÊ®Áù½øÖÆÊý×Ö
 382   2          //***********************
 383   2                      LCD1602_Disp(2,1,':');        //ÏÔÊ¾':'
 384   2              DISbuf=ReadPCF8563(0x03);       //¶Á³ö·ÖÖÓ²ÎÊý
 385   2              //***1602Òº¾§ÏÔÊ¾0-0XFF***
 386   2              j=DISbuf>>4;                //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÒÆµ½µÍ4Î»ÉÏ
 387   2                      j&=0x07;
 388   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É        
 389   2              LCD1602_Disp(3,1,j);        //ÔÚµÚ1ÐÐµÄµÚ3ÁÐÏÔÊ¾¸ß4Î»µÄÊ®Áù½øÖÆÊý×Ö
 390   2              j=DISbuf&0x0F;              //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÆÁ±Îµô£¬±£ÁôµÍ4Î»
 391   2              j+='0';                         //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É          
 392   2              LCD1602_Disp(4,1,j);        //ÔÚµÚ1ÐÐµÄµÚ4ÁÐÏÔÊ¾µÍ4Î»µÄÊ®Áù½øÖÆÊý×Ö
 393   2          //***********************
 394   2                      LCD1602_Disp(5,1,':');        //ÏÔÊ¾':'
 395   2              DISbuf=ReadPCF8563(0x02);       //¶Á³öÃë²ÎÊý
 396   2                      //***1602Òº¾§ÏÔÊ¾0-0XFF***
 397   2              j=DISbuf>>4;                //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÒÆµ½µÍ4Î»ÉÏ
 398   2                      j&=0x07;
 399   2              j+='0';                     //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É        
 400   2              LCD1602_Disp(6,1,j);        //ÔÚµÚ1ÐÐµÄµÚ3ÁÐÏÔÊ¾¸ß4Î»µÄÊ®Áù½øÖÆÊý×Ö
 401   2              j=DISbuf&0x0F;              //°ÑÒªÏÔÊ¾ÄÚÈÝµÄ¸ß4Î»ÆÁ±Îµô£¬±£ÁôµÍ4Î»
 402   2              j+='0';                     //0-9µÄÊý¾ÝÒÔ0Îª»ùµã½øÐÐÆ«ÒÆ¼´¿É          
 403   2              LCD1602_Disp(7,1,j);        //ÔÚµÚ1ÐÐµÄµÚ4ÁÐÏÔÊ¾µÍ4Î»µÄÊ®Áù½øÖÆÊý×Ö
 404   2          //***********************
 405   2          }
 406   1      }
 407          
 408          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    683    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
