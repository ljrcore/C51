C51 COMPILER V7.00  TEST51                                                                 09/18/2012 21:37:54 PAGE 1   


C51 COMPILER V7.00, COMPILATION OF MODULE TEST51
OBJECT MODULE PLACED IN TEST51.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE TEST51.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          ////////////////////////////////////////////////////////////////////////////
   2          //                ¸øÁ¦Õßµ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³£¬¿ª·¢Ñ§Ï°¶¼¸øÁ¦£¡              //
   3          ////////////////////////////////////////////////////////////////////////////
   4          //                     Ñ§Ï°51µ¥Æ¬»ú£¬ÆäÊµ¿ÉÒÔºÜ¼òµ¥                       //
   5          ////////////////////////////////////////////////////////////////////////////
   6          //                Äþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾  www.MovingChip.com                //
   7          ////////////////////////////////////////////////////////////////////////////
   8          
   9          #include <AT89X52.h>       //µ÷ÓÃ51µ¥Æ¬»úµÄÍ·ÎÄ¼þ
  10          
  11          unsigned char code music_tab[] ={   
  12          //¸ñÊ½Îª: ÆµÂÊ³£Êý, ½ÚÅÄ³£Êý, ÆµÂÊ³£Êý, ½ÚÅÄ³£Êý, 
  13          0x18, 0x30, 0x1C , 0x10,    
  14          0x20, 0x40, 0x1C , 0x10,   
  15          0x18, 0x10, 0x20 , 0x10,   
  16          0x1C, 0x10, 0x18 , 0x40,   
  17          0x1C, 0x20, 0x20 , 0x20,   
  18          0x1C, 0x20, 0x18 , 0x20,   
  19          0x20, 0x80, 0xFF , 0x20,   
  20          0x30, 0x1C, 0x10 , 0x18,   
  21          0x20, 0x15, 0x20 , 0x1C,   
  22          0x20, 0x20, 0x20 , 0x26,   
  23          0x40, 0x20, 0x20 , 0x2B,   
  24          0x20, 0x26, 0x20 , 0x20,   
  25          0x20, 0x30, 0x80 , 0xFF,   
  26          0x20, 0x20, 0x1C , 0x10,   
  27          0x18, 0x10, 0x20 , 0x20,   
  28          0x26, 0x20, 0x2B , 0x20,   
  29          0x30, 0x20, 0x2B , 0x40,   
  30          0x20, 0x20, 0x1C , 0x10,   
  31          0x18, 0x10, 0x20 , 0x20,   
  32          0x26, 0x20, 0x2B , 0x20,   
  33          0x30, 0x20, 0x2B , 0x40,   
  34          0x20, 0x30, 0x1C , 0x10,   
  35          0x18, 0x20, 0x15 , 0x20,   
  36          0x1C, 0x20, 0x20 , 0x20,   
  37          0x26, 0x40, 0x20 , 0x20,   
  38          0x2B, 0x20, 0x26 , 0x20,   
  39          0x20, 0x20, 0x30 , 0x80,   
  40          0x20, 0x30, 0x1C , 0x10,   
  41          0x20, 0x10, 0x1C , 0x10,   
  42          0x20, 0x20, 0x26 , 0x20,   
  43          0x2B, 0x20, 0x30 , 0x20,   
  44          0x2B, 0x40, 0x20 , 0x15,   
  45          0x1F, 0x05, 0x20 , 0x10,   
  46          0x1C, 0x10, 0x20 , 0x20,   
  47          0x26, 0x20, 0x2B , 0x20,   
  48          0x30, 0x20, 0x2B , 0x40,   
  49          0x20, 0x30, 0x1C , 0x10,   
  50          0x18, 0x20, 0x15 , 0x20,   
  51          0x1C, 0x20, 0x20 , 0x20,   
  52          0x26, 0x40, 0x20 , 0x20,   
  53          0x2B, 0x20, 0x26 , 0x20,   
  54          0x20, 0x20, 0x30 , 0x30,   
  55          0x20, 0x30, 0x1C , 0x10,   
C51 COMPILER V7.00  TEST51                                                                 09/18/2012 21:37:54 PAGE 2   

  56          0x18, 0x40, 0x1C , 0x20,   
  57          0x20, 0x20, 0x26 , 0x40,   
  58          0x13, 0x60, 0x18 , 0x20,   
  59          0x15, 0x40, 0x13 , 0x40,   
  60          0x18, 0x80, 0x00   
  61          };   
  62          
  63          unsigned char n=0;  //nÎª½ÚÅÄ³£Êý±äÁ¿    
  64          
  65          //---------------------------------------
  66          //Ãû³Æ£º¶¨Ê±Æ÷0ÖÐ¶Ï·þÎñ³ÌÐò
  67          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
  68          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
  69          //ÍøÖ·£ºwww.MovingChip.com
  70          //ÈÕÆÚ£º20120914
  71          //---------------------------------------
  72          void Timer0(void) interrupt 1 
  73          {                          
  74   1          TH0=0xB1;
  75   1              TL0=0xDE;                        //ÔÙ´ÎÖÃ³õÖµ
  76   1      
  77   1          //***´Ë´¦ÓÃ»§×ÔÐÐÌí¼Ó¶¨Ê±Æ÷T0ÖÐ¶Ï´¦Àí³ÌÐò***
  78   1              n--; 
  79   1          //******************************************
  80   1      
  81   1      }
  82          
  83          //---------------------------------------
  84          //Ãû³Æ: ¿ØÖÆÆµÂÊÑÓÊ±º¯Êý
  85          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
  86          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
  87          //ÍøÖ·£ºwww.MovingChip.com
  88          //ÈÕÆÚ£º20120914
  89          //---------------------------------------
  90          void delay (unsigned char m)   //¿ØÖÆÆµÂÊÑÓÊ±    
  91          {   
  92   1              unsigned i=6*m;   
  93   1              while(--i);   
  94   1      }   
  95          
  96          //---------------------------------------
  97          //Ãû³Æ: ºÁÃë¼¶ÑÓÊ±º¯Êý
  98          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
  99          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 100          //ÍøÖ·£ºwww.MovingChip.com
 101          //ÈÕÆÚ£º20120914
 102          //---------------------------------------
 103          void delayms(unsigned char a)  
 104          {   
 105   1              unsigned i=2*a;
 106   1              while(--i);                  //²ÉÓÃwhile(--a) ²»Òª²ÉÓÃwhile(a--); ¸÷Î»¿É±àÒëÒ»ÏÂ¿´¿´»ã±à½á¹û¾ÍÖªµÀÁË!  
             -  
 107   1      }   
 108          //---------------------------------------
 109          //Ãû³Æ: Ö÷º¯Êý
 110          //ÊÊÓÃ£º¸øÁ¦ÕßGL9µ¥Æ¬»ú¿ª·¢Ñ§Ï°ÏµÍ³
 111          //¹«Ë¾£ºÄþ²¨Ð¾¶¯µç×ÓÓÐÏÞ¹«Ë¾
 112          //ÍøÖ·£ºwww.MovingChip.com
 113          //ÈÕÆÚ£º20120914
 114          //---------------------------------------
 115          void main(void)            //Ö÷º¯Êý,µ¥Æ¬»ú¿ª»úºó¾ÍÊÇ´ÓÕâ¸öº¯Êý¿ªÊ¼ÔËÐÐ
 116          {
C51 COMPILER V7.00  TEST51                                                                 09/18/2012 21:37:54 PAGE 3   

 117   1      
 118   1              unsigned char p,m;   //mÎªÆµÂÊ³£Êý±äÁ¿    
 119   1              unsigned char i=0;  
 120   1              //***¶¨Ê±Æ÷Timer0³õÊ¼»¯***
 121   1          TMOD&=0xF0;            //½«TMODµÄµÍ4Î»¶¨Ê±Æ÷0¿ØÖÆ²¿·ÖÇåÁã
 122   1          TMOD|=0x01;            //ÉèÖÃ¶¨Ê±Æ÷0Îª·½Ê½1
 123   1          TL0=0xB1;              //ÉèÖÃ¶¨Ê±Æ÷0³õÖµµÍ8Î»
 124   1          TH0=0xDE;              //ÉèÖÃ¶¨Ê±Æ÷0³õÖµ¸ß8Î»       
 125   1          TR0=1;                 //Æô¶¯¶¨Ê±Æ÷0
 126   1          ET0=1;                 //Timer0ÖÐ¶ÏÔÊÐí
 127   1          //**********************
 128   1      
 129   1          //***¿ªÈ«¾ÖÖÐ¶ÏÉèÖÃ****
 130   1          //¶¨Ê±Æ÷Timer0ÉèÖÃÁËÖÐ¶ÏÔÊÐí,´Ë´¦Òª¿ªÈ«¾ÖÖÐ¶Ï
 131   1          EA=1;                  //¿ªÈ«¾ÖÖÐ¶Ï
 132   1          //*********************
 133   1      play:   
 134   1              while(1)   
 135   1          {   
 136   2          a: p=music_tab[i];   
 137   2             if(p==0x00)       { i=0, delayms(1000); goto play;}     //Èç¹ûÅöµ½½áÊø·û,ÑÓÊ±1Ãë,»Øµ½¿ªÊ¼ÔÙÀ´Ò»±é  
             -  
 138   2             else if(p==0xff)  { i=i+1;delayms(100),TR0=0; goto a;}  //ÈôÅöµ½ÐÝÖ¹·û,ÑÓÊ±100ms,¼ÌÐøÈ¡ÏÂÒ»Òô·û    
 139   2             else         {m=music_tab[i++], n=music_tab[i++];}  //È¡ÆµÂÊ³£Êý ºÍ ½ÚÅÄ³£Êý    
 140   2             TR0=1;                                             //¿ª¶¨Ê±Æ÷1    
 141   2             while(n!=0) P1_2=~P1_2,delay(m);                         //µÈ´ý½ÚÅÄÍê³É, Í¨¹ýP1¿ÚÊä³öÒôÆµ(¿É¶àÉùµÀÅ
             -¶!)    
 142   2             TR0=0;                                             //¹Ø¶¨Ê±Æ÷1    
 143   2          }   
 144   1      }
 145          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    129    ----
   CONSTANT SIZE    =    191    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
