<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">


<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<meta name="GENERATOR" content="Microsoft FrontPage 2.0">
<title>news--Post Message</title>
<meta name="FORMATTER" content="Microsoft FrontPage 2.0">
</head>

<body bgcolor=white>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>电子报新闻和重要文章</title>
<meta name="GENERATOR" content="Microsoft FrontPage 3.0">
</head>

<body bgcolor="#FFFFFF">
<style type="text/css">
<!--
.linktop{font-size:9pt}
.linktop a{color: #000000; font-style: normal; text-decoration: none; cursor: hand}
.linktop a:visited {color: rgb(0,0,0); font-style: normal; text-decoration: none}
.linktop a:active  {color:  rgb(100,0,0); font-style: normal; text-decoration: none}
.linktop a:hover {color: rgb(255,255,255); font-style:bold; text-decoration: none}	 
-->
</style>

<div align="center"><center>

<table border="0" width="700" cellspacing="0" cellpadding="0">
  <tr>
    <td width="700" align="center"><a href="/index.asp"><img src="/images/dzblogo.gif" width="228" height="60" border="0"></a><img src="/IMAGES1/kantou1.JPG" border="0" width="279" height="60"><a href="/pav/index.asp"><img src="/IMAGES1/kantou2.jpg" border="0"width="184" height="60"></a></td>
  </tr>
</table>
</center></div><div align="center"><center>

<table border="0" width="700" cellpadding="4" height="25">
  <tr>
    <td height="11" align="center" bgcolor="#12BEC2" width="77"><span
    style="font-family: 宋体; font-size: 9pt" class="linktop"><a href="/about/aboutus.asp" target="_top">关于我们</a></span></td>
    <td height="11" align="center" bgcolor="#12BEC2" width="78"><span
    style="font-family: 宋体; font-size: 9pt" class="linktop"><a href="#" target="_top">联系方式</a></span></td>
    <td height="11" align="center" bgcolor="#12BEC2" width="78"><span
    style="font-family: 宋体; font-size: 9pt" class="linktop"><a href="/zhongyao/zywz.asp" target="_top">电子报网络版</a></span></td>
    <td height="11" align="center" bgcolor="#12BEC2" width="78"><span
    style="font-family: 宋体; font-size: 9pt" class="linktop"><a href="/bbs/bbs.asp" target="_top">BBS</a></span></td>
   <!--
    <td height="11" align="center" bgcolor="#12BEC2" width="78"><span
    style="font-family: 宋体; font-size: 9pt" class="linktop"><a href="/QuestionAnswer/question/index.htm" target="_top">专家热线</a></span></td>
   -->
    <td height="11" align="center" bgcolor="#12BEC2" width="78"><span
    style="font-family: 宋体; font-size: 9pt" class="linktop"><a href="/shudian/shudian.asp" target="_top">网上书店</a></span></td>
    <td height="11" align="center" bgcolor="#12BEC2" width="78"><span
    style="font-family: 宋体; font-size: 9pt" class="linktop"><a href="/weixiu/wxzlk.asp" target="_top">电子报刊检索</a></span></td>
    <td height="11" align="center" bgcolor="#12BEC2" width="78"><span
    style="font-family: 宋体; font-size: 9pt" class="linktop"><a href="/pav/index.asp" target="_top">实用影音技术</a></span></td>
    <td height="11" align="center" bgcolor="#12BEC2" width="78"><span
    style="font-family: 宋体; font-size: 9pt" class="linktop"><a href="/jiaoliu/jiaoliu.asp" target="_top">个人链接</a></span></td>
  </tr>
</table>
</center></div>
<div align="center"><center>

<div align="center"><center><table border="0" width="650" cellspacing="1" cellpadding="2">
      <tr>
        <td width="100%" valign="top" bgcolor="#DDDDDD"><span style="font-family:宋体;font-size: 9pt"><b><p align="center">新闻和重要文章</b></span></td>
      </tr>
      <tr>
        <td width="100%" valign="top"><span style="font-family:宋体;font-size: 14px">


<strong><BR><p align="center">
<font color="darkblue">单片机电压频率测试系统</strong></font><br>
1999年,第47期,类别:新器件应用<br></p>

		<p align="left">　　在生产过程中，整机的参数检测是产品质量的保证，以往一般用工装测试并且结合万用表、示波器等读出读数，进行判断。<br>
　　我们用单片机对工装进行了改造。用改造后的工装测试时，只要把需检测的参数上下限输入单片机，把工装的针角对准待测点，然后把待测件通上电源，如果有报警声，即可根据报警指示灯的标志判断是哪一个参数出错。系统框图见图1。<br>
　　若CPU采用PHILIPS公司的89C52，内含4K字节的EPROM，用户可将工作程序固化在EPROM中，并可重复烧写。<br>
　　CPU外接晶体的振荡频率为12Hz，则<br>
　　机器周期=12×振荡周期<br>
　　　　　　=12×112μs<br>
　　　　　　=1μs<br>
　　CPU的复位电路采用手动复位与上电复位相结合的设计（图2）；ADC 0809芯片内部无时钟，在与89C52接口时，可利用其地址锁存允许信号ALE获得。<br>
　　因为，89C52 ALE时钟频率=<br>
　　1/6×CPU振荡频率<br>
　　=1/6×12MHz=2MHz<br>
　　所以，CPU ALE经双D触发器（7474）四分频后得500kHz振荡频率提供给0809。89C52的P0口用作复用数据总线。由于0809具有三态输出锁存器，故其8位数据输出引脚D0～D7可直接与89C52的数据总线P0口相连。地址译码引脚A、B、C端分别接到89C52的低三位数据线P00、P01、P02。1N0～1N7是分时进行选择控制的，选择哪一路由ADC0809的地址选择线A、B、C决定。0809的转换启动（START）信号和八路模拟输入开关的地址锁存允许（ALE）信号分别由89C52的P27、P26口提供，输出允许（OE）引脚用89C52的P25口来启动。<br>
　　报警电路图见图3。89C52的P10～P17作为1N0～1N7 8路电压越界报警指示，P21口作为频率越界报警指示。P20口接报警蜂鸣器，用作报警辅助指示。<br>
　　由于0809采集电压范围为0～5V，而被测试板卡电压一般有正负之分，且幅度大于5V，因此设计了正负电压采集系统，并利用分压电路将测试范围扩大。0809的1N6、1N7用来采集负电压，1N0～1N5用来采集正电压。负电压采集电路（图4）利用NE5532实现，改变R33、R34参数即可改变电压测试范围。正电压分压电路如图5。<br>
　　D13、D14为0809保护电路，防止1N1端口电压大于5V，损坏0809。C17用来滤除测试电压中的交流部分。R13=R14=R15采用精密电阻，则此时，电压测试范围为：<br>
　　F=5V÷1/3=15V基本上能满足测试要求。若想获得更大的测试范围，给R14并联更多电阻即可。本系统采用精密电阻，可满足一般5％测试误差的要求。<br>
　　89C52 T0口设为计数器工作方式。由于每检测一个从1到0的负跳变需用2个机器周期，这就要求被采样的电平至少维持一个完整的机器周期，由上述可知，本系统机器周期为1μs，因此89C52采样最大频率为500kHz。对于小于500kHz的频率经整形后，就可直接送入T0口，大于500kHz的频率就要通过分频、整形后，方可送入T0口。<br>
　　程序设计框图如图6所示，现将各部分简要介绍如下：<br>
　　1背跏蓟<br>
　　（1）20H单元为电压报警状态字，初值为00H，0～7位为电压报警位。21H单元为频率报警状态字，初值为00H，0位为频率报警位。<br>
　　（2）30－3FH单元分别为待测电路电压上下界常数，4A－4DH为频率计数值上下界常数。<br>
　　2辈馄德首映绦<br>
　　频率的测试原理是在给定时间（T）内测出读入的脉冲数（N），则待测频率f=N/T。<br>
　　在本系统中，用89C52内部的定时器/计数器来完成这项工作，令T0为定时方式，T1为计数方式。将T0、T1均设为方式1。<br>
　　将定时时间设为100ms，则T0应装入的时间常数（T0初值），可计算如下：<br>
　　因为，定时时间=（216－T0初值）×机器周期<br>
　　所以，T0初值=216－定时时间÷机器周期<br>
　　=216－100ms÷1μs<br>
　　=64536D<br>
　　=FC18H<br>
　　将T0初值分别装入16位数TH0和TL0。<br>
　　由于89C52计数器的外接输入端的最大频率为500kHz，而我们通常需测频率为数兆赫或数十兆赫，因此本系统采用了分频电路。设分频K倍，实测上下限频率分别为f1、f2，频率计数值上界常数为F1，下界常数为F2。<br>
　　则F1=(f1/k×500kHz×100ms）÷500kHz<br>
　　=1/K×100ms×f1<br>
　　同理F2=1/K×100ms×f2<br>
　　把十进制的F1、F2转换为16进制后，再把高低位分别存入相应的单元（4A－4DH）供频率判断程序使用。<br>
　　3逼德逝卸铣绦<br>
　　先判断测出的频率值高位，若高位不相等，即马上可判断出是否越界，若高位相等，则判断低位，若结果越界，则用置位指令把20H单元的相应位置“1”。<br>
　　在A/D转换时，选择了用软件延时方式。0809共可以测八路电压信号，开始时把通道号置1，然后发启动信号，调延时程序（延时定为200ms。由于0809转换时间为100μs，8个通道为800μs，延时定为200ms足够），读A/D转换数据，再判断电压是否越界，最后通道号加1，直到每个通道都检测完毕。<br>
　　电压上下限参数的确定：0809的分辨率为8位，最大输入电压为5V，即2－1=255对应的是满量程5V。为了测得超过5V的电压，本系统采用分压电路，电压上下限参数按以下公式确定<br>
　　V=v/5k×256<br>
　　其中V为十进制上下限参数，v为预测电压上下限，K为分压系数。<br>
　　把V转换为16进制数存入相应的内存单元（30－3FH），供判断程序使用。<br>
　　5狈⒈警信号<br>
　　若20H内容不为零，则发报警声，并且相应电压报警信号灯D0～D7亮。<br>
　　若21H内容不为零，则发报警声，频率报警信号灯D8亮。<br>
　　6笔视梅段Ч悖可重复利用：采用可擦除CPU，更改几个参数，即可满足不同的测试要求。<br>
福建　刘笑<br>
        <br>
        </font>
</span></td>
      </tr>
    </table>
    </center></div>
</body>
</html>
