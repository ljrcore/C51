C51 COMPILER V7.00  TEST33                                                                 09/19/2012 08:38:31 PAGE 1   


C51 COMPILER V7.00, COMPILATION OF MODULE TEST33
OBJECT MODULE PLACED IN TEST33.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE TEST33.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          ////////////////////////////////////////////////////////////////////////////
   2          //                给力者单片机开发学习系统，开发学习都给力！              //
   3          ////////////////////////////////////////////////////////////////////////////
   4          //                     学习51单片机，其实可以很简单                       //
   5          ////////////////////////////////////////////////////////////////////////////
   6          //                宁波芯动电子有限公司  www.MovingChip.com                //
   7          ////////////////////////////////////////////////////////////////////////////
   8          
   9          #include <AT89X52.h>       //调用51单片机的头文件
  10          
  11          //---------------------------------------
  12          //定义一个数据表格
  13          unsigned char code TAB[10]=
  14          {                          //定义表格一定要使用code，这样会做到程序存储区中
  15              0x3F,                  //表格第1步数据0b00111111
  16              0x06,                  //表格第2步数据0b00000110
  17              0x5B,                  //表格第3步数据0b01011011
  18              0x4F,                  //表格第4步数据0b01001111
  19              0x66,                  //表格第5步数据0b01100110
  20              0x6D,                  //表格第6步数据0b01101101
  21              0x7D,                  //表格第7步数据0b01111101
  22              0x07,                  //表格第8步数据0b00000111
  23              0x7F,                  //表格第9步数据0b01111111
  24              0x6F,                  //表格第10步数据0b01101111
  25          };
  26          unsigned int i;      //定义一个int型变量，中断计次用
  27          unsigned char b=9;    //定义一个char型变量，显示内容用
  28          
  29          //---------------------------------------
  30          //名称：定时器2中断服务程序
  31          //适用：给力者GL9单片机开发学习系统
  32          //公司：宁波芯动电子有限公司
  33          //网址：www.MovingChip.com
  34          //日期：20120914
  35          //---------------------------------------
  36          void Timer2(void) interrupt 5 
  37          {                          //定时25000微秒
  38   1          TF2=0;                 //溢出标志位必须软件清除
  39   1          TL2=0xFF;              //重新给TL2赋初值
  40   1          TH2=0x4B;              //重新给TH2赋初值
  41   1      
  42   1          //***此处用户自行添加定时器T2中断处理程序***
  43   1              if(++i>39)         //对中断计次，记到40次后，刚好1秒钟
  44   1              {
  45   2                      i=0;            //对计次用寄存器清零，以被下一个计次循环
  46   2                      if(++b>9) b=0;  //进行秒计数，因为数码管为1位，所以大于9后清零
  47   2                      P2=TAB[b];          //将TAB[b]的值送入P1口输出
  48   2              }
  49   1          //******************************************
  50   1      
  51   1      }
  52          //---------------------------------------
  53          //名称: 主函数
  54          //适用：给力者GL9单片机开发学习系统
  55          //公司：宁波芯动电子有限公司
C51 COMPILER V7.00  TEST33                                                                 09/19/2012 08:38:31 PAGE 2   

  56          //网址：www.MovingChip.com
  57          //日期：20120914
  58          //---------------------------------------
  59          void main(void)            //主函数,单片机开机后就是从这个函数开始运行
  60          {
  61   1      
  62   1           //***定时器Timer2初始化***
  63   1          TL2=0xFF;              //设置定时器2初值低8位
  64   1          TH2=0x4B;              //设置定时器2初值高8位
  65   1          TR2=1;                 //启动定时器2
  66   1          ET2=1;                 //Timer2中断允许
  67   1          //**********************
  68   1      
  69   1          //***开全局中断设置****
  70   1          //定时器Timer1设置了中断允许,此处要开全局中断
  71   1          //定时器Timer2设置了中断允许,此处要开全局中断
  72   1          EA=1;                  //开全局中断
  73   1          //*********************
  74   1      
  75   1          while(1)               //死循环,单片机初始化后,将一直运行这个死循环
  76   1          {     
  77   2      
  78   2          }
  79   1      }
  80          
  81          
  82          
  83          /*void Timer2() interrupt 5
  84          {
  85                  TF2=0;
  86                  RCAP2H=0x4b;
  87                  RCAP2L=0xff;                     //再次置初值，以使下一次中断仍然为25ms
  88          
  89           //中断服务代码添加在这里  
  90                  if(++i>39)         //对中断计次，记到40次后，刚好1秒钟
  91                  {
  92                          i=0;            //对计次用寄存器清零，以被下一个计次循环
  93                          if(++k>9) k=0;  //进行秒计数，因为数码管为1位，所以大于9后清零
  94                          P0=tab[k];      //要显示的数查后取显示数据送给P0口
  95                  }
  96           //以上是中断服务代码                 
  97          }
  98          //---------------------------------------
  99          //函数名称: 主函数      
 100          //适用型号：给力者51&AVR单片机学习开发系统(GL8)
 101          //公司名称：宁波芯动电子有限公司
 102          //公司网址：www.MovingChip.com
 103          //编写日期：20120608
 104          //-----------------------------------------             
 105          void main()             //主函数，单片机启动后，从这个函数开始运行
 106          {       
 107                  P0=tab[0];          //开机后数码管显示0
 108                  RCAP2H=0x4b;
 109                  RCAP2L=0xff;                    //RCAP2H与RCAP2L拼成了16位的计数寄存器 
 110                                          //这里设置其初值为 0x4bff，变定时器2中断的触发周期约为25000us
 111                                          //定时器启动后它以CPU频率自增至0xffff后触发中断
 112                  ET2=1;                          //使能定时器2中断
 113                  EA=1;                              //使能全局中断(要使某中断真正使能，除了置位相应的中断使能位，还必须置位全局中断使能位)
 114                  TR2=1;                          //启动定时器2
 115                  while(1)          //死循环，反复的执行里面的代码
 116                  {
 117                           
C51 COMPILER V7.00  TEST33                                                                 09/19/2012 08:38:31 PAGE 3   

 118                  }
 119          }*/
 120          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     82    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
