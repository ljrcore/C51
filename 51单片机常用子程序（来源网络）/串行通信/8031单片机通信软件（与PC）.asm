	ORG 0000H
	LJMP	TO_MAIN
	ORG	0023H
	LJMP	INTU
TO_MIAN:.........
COMUN_51:MOV	TMOD,#20H
	MOV	TH1,#0FDH
	MOV	TL1,#0FDH
	SETB	TR1
	SETB	EA
RPT:SETB	ES
	MOV	SCON,#0F8H
	MOV	PCON,#80H
	MOV 23H,#0CH
	MOV 22H,#00H
	MOV 21H,#08H
	MOV 20H,#00H
	MOV R5,#00H
	MOV R6,25H
	MOV	R7,26H
	INC 	R6
	INC 	R7
LIIO_RPTT:SJMP LOOP_RPTT
RPTR:CLR	ES
RPTR:SJMP	RETR1

INTU:JB	RI ,TO_RI1
INTUR:JB TI,INTUR1
INTUR1:RETI
TO_TI1:MOV	ACC,24H
	XRL ACC,R5
	JZ TO_TI3
TO_TI2:POP ACC
	POP ACC	
	MOV	DPTR,#RPT
	PUSH DPL
	PUSH DPH
    MOV SBUF,#0FFH
	RETI
TO_TI3:POP ACC
	POP ACC
	MOV DPTR ,#RPTR
    PUSH DPL
	PUSH DPH
	MOV SBUF,#00H
    RETI
TO_TI4:MOV DPH,21H
	MOV	DPL,20H
	MOVX @DPTR,A
	INC DPTR
	MOV 21H,DPH
	MOV 20H,DPL
	MOV SBUF,A
TO_TI5:RETI
TO_RI1:JNB 9DH,TO_RI3
	MOV A,SBUF
	CLR C
	SUBB A,27H
	JNZ TO_RI2
	MOV SBUF,#00H
	CLR 9BH
TO_RI2:RETI
TO_RI3:DJNZ R6,TO_RI4
	   DJNZ R7,TO_RI4
	MOV 24H,SBUF
	AJMP TO_TI1
TO_RI4:MOV A,SBUF
	MOV DPH,23H
	MOV DPL,22H
	MOVX @DPTR,A
	ADD A,R5
    MOV R5,A
	INC DPTR
	MOV 23H,DPH
	MOV 22H,DPL
	AJMP TO_TI4
.......